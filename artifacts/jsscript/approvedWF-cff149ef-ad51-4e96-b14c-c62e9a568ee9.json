{
	"id": "cff149ef-ad51-4e96-b14c-c62e9a568ee9",
	"createdAt": "2021-04-06T13:48:49.000Z",
	"createdBy": "james",
	"globalScripts": [],
	"externalModules": [],
	"entitySets": [
		{
			"id": "473F3569-67AB-46B6-89E6-F2D3F11F937C",
			"name": "inspections",
			"contextname": "inspections"
		},
		{
			"id": "988B3DAD-64AB-4137-8B22-7C84B30685B3",
			"name": "equipment",
			"contextname": "equipment"
		}
	],
	"apis": [],
	"name": "approvedWF",
	"ver": "21.8.12.1431",
	"description": null,
	"content": [
		"==OBJECT STRING==",
		"// Refer to this log (\"System Logs\" tool) to see the objectKey of the approved workflow",
		"log.info(wfData);",
		"// wfData.objectKey = Equipment Part Number",
		"",
		"",
		"// Update the inspection record \"Status\" to \"Complete\", where the object key matches",
		"",
		"// ----- //",
		"// Regarding difference between 'QueryBuilder' and usage of our entities parsing. ",
		"// Querybuilder is native typeorm without any layer from Neptune.",
		"",
		"// The benefit of using our entity parser is audit logging.",
		"// And some extra data formatting for different databases - that you will not have for querybuilder.",
		"// This is a new feature in our LTS release 21.09. ",
		"",
		"// Recommendation is to use our entities function if you don't need join etc. from querybuilder!",
		"// ----- //",
		"",
		"// *** QueryBuilder:",
		"const inspectionsTable = entities.inspections;",
		"await inspectionsTable.createQueryBuilder()",
		"    .update()",
		"    .set({\"status\":\"Complete\"})",
		"    .where(\"part_number = :part_number\", {part_number: wfData.objectKey})",
		"    .execute();",
		"",
		"// *** Alternative Method:",
		"// await entities.inspections.update({\"status\": \"Complete\"}, {part_number: wfData.objectKey});",
		"",
		"",
		"",
		"// Set the Equipments \"assigned_to\" reference to null",
		"// Update the \"checkup_date\" for the equipment, to todays date",
		"var currentDate = new Date();",
		"",
		"// *** QueryBuilder:",
		"const equipmentTable = entities.equipment;",
		"await equipmentTable.createQueryBuilder()",
		"    .update()",
		"    .set({",
		"        \"assigned_to\":null,",
		"        \"assigned_for_checking\":false,",
		"        \"checkup_date\":currentDate",
		"        })",
		"    .where(\"part_number = :part_number\", {part_number: wfData.objectKey})",
		"    .execute();",
		"",
		"// *** Alternative Method:",
		"// await entities.equipment.update({",
		"//         \"assigned_to\":null,",
		"//         \"assigned_for_checking\":false,",
		"//         \"checkup_date\":currentDate",
		"//     }, ",
		"//     {",
		"//         part_number: wfData.objectKey",
		"//     });",
		"",
		"",
		"complete();"
	],
	"useAsGlobalScript": false,
	"isTypescript": false,
	"transpiledContent": null,
	"lastRunSuccessful": true,
	"jsscriptGroup": "089a48c6-6626-4c48-aade-68129c29a97b",
	"package": "1d063863-5ccb-42c8-a7df-323605fe1ee3"
}